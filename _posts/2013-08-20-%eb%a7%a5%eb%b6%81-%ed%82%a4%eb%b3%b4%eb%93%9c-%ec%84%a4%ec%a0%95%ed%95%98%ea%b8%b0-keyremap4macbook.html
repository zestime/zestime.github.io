---
layout: post
title: 맥북 키보드 설정하기, KeyRemap4Macbook
date: 2013-08-20 14:09:10.000000000 +09:00
type: post
published: true
status: publish
categories:
- Computer
- Mac
tags:
- caps lock
- control
- keyremap4macbook
- mac
- mac osx
- swap keys
- 키보드
meta:
  _edit_last: '1'
  dsq_thread_id: '4100113893'
author:
  login: kp
  email: zestime@gmail.com
  display_name: kp
  first_name: Kiyong
  last_name: Han
---
<p>맥북의 키 배치가 어색하고 불편하신 분들도 많으실 것 같습니다. 저는 Emacs를 사용하는데, Control키를 자주 눌러야해서 불편하더라구여... 이런 키보드 설정을 사실은 자기 편한데로 할 수 있답니다.</p>
<h1>KeyRemap4Macbook</h1>
<p><a href="https://pqrs.org/macosx/keyremap4macbook/">KeyRemap4Macbook</a>은 키의 매핑을 바꾸는 프로그램입니다. 부트 캠프로 윈도우를 쓰시는 분들은, 키 배치를 윈도우처럼 하기 위해서 많이 쓰시는데요, 이 프로그램은 그 보다 우수합니다. 설치를 마치면 재부팅을 하셔야합니다. 부팅이 되면 상단의 메뉴바에 못보던 아이콘이 나타납니다. <a href="http://blog.kusweet.com/wp-content/uploads/2013/08/Screen-Shot-2013-08-20-at-10.13.35-AM.png"><img class="alignnone size-medium wp-image-434" src="{{ site.baseurl }}/assets/Screen-Shot-2013-08-20-at-10.13.35-AM-300x14.png" alt="Screen-Shot-2013-08-20-at-10.13.35-AM" width="300" height="14" /></a></p>
<p>앞에 보이는 사각형의 아이콘이 KeyRemap4Macbook입니다. 설정을 해야하는까, 아이콘을 클릭하여 Preferences로 진입합니다.<a href="http://blog.kusweet.com/wp-content/uploads/2013/08/Screen-Shot-2013-08-20-at-10.18.57-AM.png"><img class="alignnone size-full wp-image-436" src="{{ site.baseurl }}/assets/Screen-Shot-2013-08-20-at-10.18.57-AM.png" alt="Screen-Shot-2013-08-20-at-10.18.57-AM" width="782" height="756" /></a></p>
<p>이미, 이런 저런 설정이 빼곡히 채워져 있습니다. 읽어보시고 원하시는 기능에 체크를 하시면 됩니다. 체크와 동시에, 해당 매핑은 변경되므로 바로바로 테스트 하시면서 사용하시면 됩니다.</p>
<h1>Advanced Setting 고급 설정</h1>
<p>Emacs의 이야기로 돌아가겠습니다. 제가 원하는 설정은 Caps Lock키가 평소에는 잘 작동하다가, Emacs라는 프로그램을 사용할 때만, Control키로 변경되는 것입니다. 즉, 프로그램에 따라 키의 동작 달랐으면 한다는 것입니다. 이게 가능할까요?</p>
<h2>1. PCKeyboardHack으로 Caps Lock 변경</h2>
<p>먼저, <a href="https://pqrs.org/macosx/keyremap4macbook/pckeyboardhack.html.en">PCKeyboardHack</a>을 설치합니다. 이 프로그램은 키의 고유 키값을 변경 시키는 프로그램입니다. 저는 Caps Lock키를 PC Command 값으로 셋팅합니다. 이렇게 해도 상관없는 이유는, 나중에 보시겠지만, KeyRemap4Macbook으로 재할당 할 생각이기 때문입니다.</p>
<p><a href="http://blog.kusweet.com/wp-content/uploads/2013/08/Screen-Shot-2013-08-20-at-10.31.16-AM.png"><img class="alignnone size-full wp-image-437" src="{{ site.baseurl }}/assets/Screen-Shot-2013-08-20-at-10.31.16-AM.png" alt="Screen-Shot-2013-08-20-at-10.31.16-AM" width="782" height="736" /></a></p>
<p>위의 화면과 같이 설정하시고, Caps Lock을 누르시면 더 이상 작동하지 않습니다. 이제 Caps Lock 키는 PC Application Key라는 이상한 키에 할당되었습니다.</p>
<h2>2. KeyRemap4Macbook으로 PC Application Key 할당</h2>
<p>KeyRemap4Macbook의 많은 설정 중에, PC Application Key를 찾습니다.</p>
<p><a href="http://blog.kusweet.com/wp-content/uploads/2013/08/Screen-Shot-2013-08-20-at-10.36.40-AM.png"><img class="alignnone size-full wp-image-438" src="{{ site.baseurl }}/assets/Screen-Shot-2013-08-20-at-10.36.40-AM.png" alt="Screen-Shot-2013-08-20-at-10.36.40-AM" width="782" height="756" /></a>이제, 이전과 동일한 상태가 되었습니다. 달라진게 전혀 없는 상태입니다. KeyRemap4Macbook에서 5번째 Tab에서 'Open private.xml'을 클릭합니다. 특정 어플리케이션과 관련된 항목은 Custom Setting으로 분류되며, 이는 private.xml을 통해 설정하게 됩니다.</p>
<p><a href="http://blog.kusweet.com/wp-content/uploads/2013/08/Screen-Shot-2013-08-20-at-10.38.54-AM.png"><img class="alignnone size-full wp-image-439" src="{{ site.baseurl }}/assets/Screen-Shot-2013-08-20-at-10.38.54-AM.png" alt="Screen-Shot-2013-08-20-at-10.38.54-AM" width="782" height="756" /></a>  XML 파일을 열어서, 자신의 상황에 맞게 고쳐 나갑니다. 하단의 링크에 예제 및 가이드 문서가 있으니, 어렵지 않게 하실 수 있습니다.</p>
<pre class="lang:xhtml decode:true" title="private.xml">&lt;?xml version="1.0"?&gt;
&lt;root&gt;
  &lt;replacementdef&gt;
    &lt;replacementname&gt;CAPS_IS_CONTROL_APPS&lt;/replacementname&gt;
    &lt;replacementvalue&gt;TERMINAL, ITERM2, VI, EMACS&lt;/replacementvalue&gt;
  &lt;/replacementdef&gt;
  &lt;replacementdef&gt;
    &lt;replacementname&gt;WINDOWS_KEY_APPS&lt;/replacementname&gt;
    &lt;replacementvalue&gt;VirtualBoxVM&lt;/replacementvalue&gt;
  &lt;/replacementdef&gt;

  &lt;appdef&gt;
    &lt;appname&gt;ITERM2&lt;/appname&gt;
    &lt;equal&gt;com.googlecode.iterm2&lt;/equal&gt;
  &lt;/appdef&gt;

  &lt;appdef&gt;
    &lt;appname&gt;EMACS&lt;/appname&gt;
    &lt;equal&gt;org.gnu.Emacs&lt;/equal&gt;
  &lt;/appdef&gt;

  &lt;appdef&gt;
    &lt;appname&gt;VirtualBoxVM&lt;/appname&gt;
    &lt;equal&gt; org.virtualbox.app.VirtualBoxVM &lt;/equal&gt;
  &lt;/appdef&gt;

  &lt;item&gt;
    &lt;name&gt;Caps Lock is Command in terminal applications&lt;/name&gt;
    &lt;identifier&gt;private.appdef&lt;/identifier&gt;
    &lt;only&gt;{{ CAPS_IS_CONTROL_APPS }}&lt;/only&gt;
    &lt;autogen&gt;--KeyToKey-- KeyCode::PC_APPLICATION, KeyCode::CONTROL_L&lt;/autogen&gt;
  &lt;/item&gt;
  &lt;item&gt;
    &lt;name&gt;Changed Command, Option to Option in VirtualBox&lt;/name&gt;
    &lt;identifier&gt;private.appdefwindows&lt;/identifier&gt;
    &lt;only&gt;{{ WINDOWS_KEY_APPS }}&lt;/only&gt;
    &lt;autogen&gt;--KeyToKey-- KeyCode::COMMAND_L, KeyCode::OPTION_L&lt;/autogen&gt;
    &lt;autogen&gt;--KeyToKey-- KeyCode::OPTION_L, KeyCode::COMMAND_L&lt;/autogen&gt;
    &lt;autogen&gt;--KeyToKey-- KeyCode::OPTION_R, KeyCode:: PC_APPLICATION &lt;/autogen&gt;
  &lt;/item&gt;
&lt;/root&gt;</pre>
<p>먼저, 적용이 되어야하는 어플리케이션을 설정하였습니다. 이후, &lt;item&gt;으로 preferences에 보여질 항목과 그 내용을 설정했습니다. 눈에 확연히 보여주듯, &lt;autogen&gt;부분이 실질적으로 키 매핑을 변경하는 부분입니다. 단지, &lt;only&gt;를 통해, 적용되어야 하는 application을 제한하고 있을 뿐입니다. 첫 번째 item은 Caps Lock을 Control로 변경하는 내용이며, 두 번째 item은 VirtualBox에서 사용되는 키 배열을 변경한 내용입니다.</p>
<h2>Caps Lock Keyboard Setting 변경</h2>
<p>위와 같이 하셔도 Caps Lock이 작동하지 않을 수 있습니다. 환경 설정을 하나 더 바꿔줘야 합니다. [System Preferences] - [Keyboard]에서 Caps Lock에 대한 설정을 해제합니다.</p>
<p><a href="http://blog.kusweet.com/wp-content/uploads/2013/08/Screen-Shot-2013-08-20-at-2.01.07-PM.png"><img class="alignnone size-full wp-image-440" src="{{ site.baseurl }}/assets/Screen-Shot-2013-08-20-at-2.01.07-PM.png" alt="Screen-Shot-2013-08-20-at-2.01.07-PM" width="782" height="712" /></a>위와 같이 설정하시면, caps lock이 터미널 관련 어플리케이션에서 control로 작동됨을 확인하실 수 있습니다.</p>
<h2>KeyRemap4Macbook 설정</h2>
<p>일단, 제가 필요한 옵션은 다음과 같습니다. 이 포스팅의 묘미는 저마다 만들어진 옵션이 저기에 늘어나는 것이겠죠. 많은 옵션이 기본적으로 제공되고 있으니, 천천히 읽어 보시면 좋겠네요.</p>
<p><a href="http://blog.kusweet.com/wp-content/uploads/2013/08/Screen-Shot-2013-08-20-at-2.04.33-PM.png"><img class="alignnone size-full wp-image-441" src="{{ site.baseurl }}/assets/Screen-Shot-2013-08-20-at-2.04.33-PM.png" alt="Screen-Shot-2013-08-20-at-2.04.33-PM" width="782" height="756" /></a></p>
<h1>References</h1>
<ul>
<li><a href="https://pqrs.org/macosx/keyremap4macbook/">https://pqrs.org/macosx/keyremap4macbook/</a> - KeyRemap4Macbook의 메인 페이지</li>
<li><a href="https://pqrs.org/macosx/keyremap4macbook/pckeyboardhack.html.en">https://pqrs.org/macosx/keyremap4macbook/pckeyboardhack.html.en</a> - PCKeyboardHack의 메인 페이지</li>
<li><a href="https://pqrs.org/macosx/keyremap4macbook/document.html.en#privatexml">https://pqrs.org/macosx/keyremap4macbook/document.html.en#privatexml</a> - custom setting 사용에 대한 안내</li>
<li><a href="https://pqrs.org/macosx/keyremap4macbook/xml.html.en">https://pqrs.org/macosx/keyremap4macbook/xml.html.en</a> - private.xml 작성에 대한 안내</li>
<li><a href="https://github.com/tekezo/KeyRemap4MacBook/blob/version_8.3.0/src/core/server/Resources/include/checkbox/samples.xml">https://github.com/tekezo/KeyRemap4MacBook/blob/version_8.3.0/src/core/server/Resources/include/checkbox/samples.xml</a> - private.xml 설정에 대한 예제</li>
</ul>
